{% extends 'layouts/_layout_admin.html' %}
{% block page_title %}Sucursales{% endblock %}

{% block admin_content %}
{% from 'components/_page_header.html' import page_header %}
{% from 'components/_data_table.html' import data_table %}
{% from 'components/_badge.html' import badge %}

{% call page_header('Sucursales', breadcrumb=[('Configuración', ''), ('Sucursales', '')]) %}
  <a href="{{ url_for('sucursales.nueva_sucursal') }}" class="cl-btn cl-btn--primary">
    <i data-lucide="plus" class="icon-sm"></i> Nueva Sucursal
  </a>
{% endcall %}

{% call(row) data_table(
    items=sucursales,
    columns=[
      ('Nombre', 'nombre', true),
      ('Dirección', none, false),
      ('Teléfono', none, false),
      ('Estado', none, false),
      ('', none, false)
    ],
    empty_text='No hay sucursales registradas',
    empty_icon='building',
    search_placeholder='Buscar sucursal…',
    id='tblSucursales'
) %}
  <td>{{ row.nombre }}</td>
  <td>{{ row.direccion or '—' }}</td>
  <td>{{ row.telefono or '—' }}</td>
  <td>{{ badge('Activa', 'success') if row.activa else badge('Inactiva', 'gray') }}</td>
  <td class="text-end">
    <a href="{{ url_for('sucursales.editar_sucursal', id=row.id) }}" class="cl-btn cl-btn--sm cl-btn--ghost" title="Editar">
      <i data-lucide="pencil" class="icon-sm"></i>
    </a>
  </td>
{% endcall %}
{% endblock %}
