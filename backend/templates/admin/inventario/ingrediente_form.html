{% extends 'layouts/_layout_admin.html' %}
{% block page_title %}{{ 'Editar' if ingrediente else 'Nuevo' }} Ingrediente{% endblock %}

{% block admin_content %}
{% from 'components/_page_header.html' import page_header %}
{% from 'components/_form_group.html' import form_group %}

{{ page_header(
    'Editar Ingrediente: ' ~ ingrediente.nombre if ingrediente else 'Nuevo Ingrediente',
    breadcrumb=[('Inventario', ''), ('Ingredientes', url_for('inventario.lista_ingredientes')), (('Editar' if ingrediente else 'Nuevo'), '')]
) }}

<div class="cl-card" style="max-width:640px;">
  <form method="POST">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    {{ form_group('nombre', 'Nombre', value=ingrediente.nombre if ingrediente else '', required=true, icon='flask-conical') }}
    {{ form_group('unidad', 'Unidad', value=ingrediente.unidad if ingrediente else '', required=true, placeholder='kg, litro, pieza, gramo') }}
    {% if not ingrediente %}
    {{ form_group('stock_actual', 'Stock Inicial', type='number', value='0', step='0.01') }}
    {% endif %}
    {{ form_group('stock_minimo', 'Stock MÃ­nimo (alerta)', type='number', value=ingrediente.stock_minimo if ingrediente else '0', step='0.01') }}
    {{ form_group('costo_unitario', 'Costo Unitario ($)', type='number', value=ingrediente.costo_unitario if ingrediente else '0', step='0.01', icon='dollar-sign') }}

    <div class="d-flex gap-2 mt-4">
      <button type="submit" class="cl-btn cl-btn--primary">
        <i data-lucide="save" class="icon-sm"></i> Guardar
      </button>
      <a href="{{ url_for('inventario.lista_ingredientes') }}" class="cl-btn cl-btn--ghost">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}
