{% extends 'layouts/_layout_admin.html' %}
{% block page_title %}Entrada de Stock{% endblock %}

{% block admin_content %}
{% from 'components/_page_header.html' import page_header %}
{% from 'components/_form_group.html' import form_group %}

{{ page_header('Entrada de Stock', breadcrumb=[('Inventario', ''), ('Ingredientes', url_for('inventario.lista_ingredientes')), ('Entrada', '')]) }}

<div class="cl-card" style="max-width:640px;">
  <form method="POST">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <div class="cl-form-group">
      <label class="cl-form-label" for="field_ingrediente_id">Ingrediente <span class="text-danger">*</span></label>
      <select class="cl-form-input cl-form-select" id="field_ingrediente_id" name="ingrediente_id" required>
        <option value="">Seleccionar ingrediente…</option>
        {% for i in ingredientes %}
        <option value="{{ i.id }}">{{ i.nombre }} ({{ i.unidad }}) — Stock: {{ '%.2f'|format(i.stock_actual) }}</option>
        {% endfor %}
      </select>
    </div>

    {{ form_group('cantidad', 'Cantidad', type='number', required=true, step='0.01', min='0.01') }}
    {{ form_group('costo', 'Costo Unitario ($) — opcional', type='number', step='0.01', min='0', icon='dollar-sign') }}
    {{ form_group('motivo', 'Motivo', value='Compra', placeholder='Ej: Compra, Donación…') }}

    <div class="d-flex gap-2 mt-4">
      <button type="submit" class="cl-btn cl-btn--primary">
        <i data-lucide="package-plus" class="icon-sm"></i> Registrar Entrada
      </button>
      <a href="{{ url_for('inventario.lista_ingredientes') }}" class="cl-btn cl-btn--ghost">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}
